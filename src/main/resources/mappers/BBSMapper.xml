<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.minieyes.stories.bbs.dao.BBSDAO">


	
	<select id="selectAllBBS"
		resultType="com.minieyes.stories.bbs.model.BBS">
	
		SELECT
			`id`
			, `title`
		FROM
			`bbs`
	
	</select>

	<select id="selectTargetBBS"
		parameterType="int"
		resultType="com.minieyes.stories.bbs.model.BBS">
	
		SELECT
			`id`
			, `title`
		FROM
			`bbs`
		WHERE
			`id` = #{bbsId}
		
	</select>

	<select id="selectCategoriesByBBS"
		parameterType="int"
		resultType="com.minieyes.stories.bbs.model.Category">
	
		SELECT
			`id`
			, `title`
		FROM
			`category`
		WHERE
			`bbsId` = #{bbsId}	
	
	</select>
	
	<select id="selectBBS"
		parameterType="int"
		resultType="com.minieyes.stories.bbs.model.BBSDTO">
		
			SELECT
				article.id AS articleId
				, category.title AS categoryName
			    , article.title AS title
			    , article.userName AS userName
			    , article.createdAt AS createdAt
			FROM
				`article`
			JOIN `bbs` ON article.bbsId = bbs.id
			JOIN `category` ON article.categoryId = category.id
			WHERE bbs.id = #{bbsId}
			ORDER BY articleId DESC
	
	</select>


</mapper>